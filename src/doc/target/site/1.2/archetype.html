<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!--
 | Generated by Apache Maven Doxia at Jul 16, 2012
 | Rendered using Apache Maven Fluido Skin 1.2.2
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Cube Project - Cube Project Home Page</title>
    <link rel="stylesheet" href="../css/apache-maven-fluido.min.css" />
    <link rel="stylesheet" href="../css/site.css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />

      
    <script type="text/javascript" src="../js/apache-maven-fluido.min.js"></script>

    
      <meta name="author" content="Bassem Debbabi" />
    <meta name="Date-Revision-yyyymmdd" content="20120716" />
    <meta http-equiv="Content-Language" content="en" />
            </head>
        <body class="topBarDisabled">
          
        
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                                  <a href="../index.html" id="bannerLeft">
                                                                                                <img src="../images/cube.png"  alt="Cube Project"/>
                </a>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
                  <li id="projectVersion">Version: 1.2</li>
              
                
                    
                  <li id="publishDate" class="pull-right">Last Published: 2012-07-16</li> 
            
                            </ul>
      </div>

            <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
                
                    
                                    <h3>Project Links</h3>
                  <ul>
                  <li class="none">
                          <a href="../index.html" title="Home">Home</a>
            </li>
                  <li class="none">
                          <a href="../1.2/getting_started.html" title="Getting started">Getting started</a>
            </li>
                  <li class="none">
                          <a href="../1.2/doc.html" title="Documentation">Documentation</a>
            </li>
                  <li class="none">
                          <a href="../download.html" title="Download">Download</a>
            </li>
                  <li class="none">
                          <a href="../license.html" title="License">License</a>
            </li>
          </ul>
                        <h3>Catalog</h3>
                  <ul>
                  <li class="none">
                          <a href="../1.2/managed_elements.html" title="Managed Elements">Managed Elements</a>
            </li>
                  <li class="none">
                          <a href="../1.2/constraints.html" title="Constraints">Constraints</a>
            </li>
                  <li class="none">
                          <a href="../1.2/extensions.html" title="Extensions">Extensions</a>
            </li>
          </ul>
                        <h3>Other Links</h3>
                  <ul>
                  <li class="none">
                          <a href="http://cube.imag.fr/wiki" class="externalLink" title="Wiki">Wiki</a>
            </li>
          </ul>
                      
                    
                
          <hr class="divider" />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="poweredBy" alt="Built by Maven" src="../images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
        <div id="bodyColumn"  class="span10" >
                                  
            <p><a href="./doc.html">Documentation</a> &gt;</p><div class="section"><h2>Archetype specification<a name="Archetype_specification"></a></h2><div class="section"><h3>The Archetype definition<a name="The_Archetype_definition"></a></h3><div class="source"><pre class="prettyprint">&lt;cube xmlns:core=&quot;fr.liglab.adele.cube.core&quot; xmlns:osgi=&quot;org.osgi.cube&quot;&gt;
  &lt;archetype id=&quot;...&quot; name=&quot;...&quot; version=&quot;...&quot;&gt;

  &lt;/archetype&gt;
&lt;/cube&gt;</pre></div><p>We start by writing the <tt>cube</tt> tag with the different namespaces of the different <tt>extensions</tt> that will be used. In the above example, we have used two extensions, the <tt>core</tt> extension and an <tt>osgi</tt> extension. We will see after how to use the elements provided by these extensions.</p><p>After that, we write the <tt>archetype</tt> tag with three attributes: <tt>id</tt> the identifier of the archetype, <tt>name</tt> a symbolic name and <tt>version</tt> the version of the archetype.</p><p>The archetype definition contains three sub-sections:</p><img src="./images/archetype_1.png" alt="archetype definition" /><div class="section"><h4>Types<a name="Types"></a></h4><p>In this section, the user declares different types of the managed elements.</p><div class="source"><pre class="prettyprint">  &lt;types&gt;
    &lt;osgi:osgi-gateway id=&quot;HomeGateway&quot;/&gt;
    &lt;core:node id=&quot;PC&quot;/&gt;
    &lt;core:node id=&quot;Server&quot;/&gt;
    &lt;core:component id=&quot;CPUTemeratureMeter&quot;/&gt;
    &lt;core:component id=&quot;CPUTemeratureAlarm&quot;/&gt;
    &lt;core:scope id=&quot;LAN&quot;/&gt;      
  &lt;/types&gt;</pre></div><p>The managed elements are provided by the different cube extensions (see <a href="./managed_elements.html">Managed Elements Catalog</a>). They are abstractions of the real world managed elements. </p><p>In this section of the archetype, we create types specific to the use case to manage by combining the different managed elements abstractions. For instance, we have specified above two different nodes (<tt>PC</tt> and <tt>Server</tt>) where different self-management policies will apply to each type (See constraints sub-section below).</p><p>The <tt>core</tt> extension provides three main managed element abstractions (or meta-types):</p><img src="./images/archetype_2.png" alt="archetype types" /><ul><li><b>component</b>: this is an abstraction of software components.</li><li><b>node</b>: represents deployment platform or physical devices where component instances execute. Nodes can be organized into virtual groups called <i>Scopes</i>.</li><li><b>scope</b>: represents various types of application deployment areas.</li></ul><p>At execution time, the different types will be instanciated to represent what is happening in the real managed system. The instantiation is controlled by the <a href="./agent.html">Cube agent</a>'s Resolver, which validate each occcured instance against a set of user-specified constraints (see Constraints sub-section below).</p><img src="./images/archetype_3.png" alt="archetype type instances" /></div><div class="section"><h4>Constraints<a name="Constraints"></a></h4><p>See <a href="./constraints.html">Constraints Catalog</a></p><img src="./images/archetype_4.png" alt="archetype constraints" /><p>Here is a detailed schema of the <tt>Connect</tt> constraint and how it integrates to the Cube Resolution Process. </p><img src="./images/archetype_5.png" alt="archetype constraints 2" /></div><div class="section"><h4>Global-configs<a name="Global-configs"></a></h4></div></div><div class="section"><h3>Full Example<a name="Full_Example"></a></h3><div class="source"><pre class="prettyprint">&lt;cube xmlns:core=&quot;fr.liglab.adele.cube.core&quot; xmlns:osgi=&quot;org.osgi.cube&quot;&gt;
  &lt;archetype id=&quot;net.debbabi.cube.demo&quot; name=&quot;Demo Application&quot; version=&quot;1.0&quot;&gt;

    &lt;types&gt;
      &lt;osgi:osgi-gateway id=&quot;HomeGateway&quot;/&gt;
      &lt;core:node id=&quot;PC&quot;/&gt;
      &lt;core:node id=&quot;Server&quot;/&gt;
      &lt;core:component id=&quot;CPUTemeratureMeter&quot;/&gt;
      &lt;core:component id=&quot;CPUTemeratureAlarm&quot;/&gt;
      &lt;core:scope id=&quot;LAN&quot;/&gt;
    &lt;/types&gt;

    &lt;constraints&gt;
      &lt;variables&gt;
        &lt;var id=&quot;hg&quot; type=&quot;HomeGateway&quot;/&gt;
        &lt;var id=&quot;pc&quot; type=&quot;PC&quot;/&gt;
        &lt;var id=&quot;tm&quot; type=&quot;TemperatureMeter&quot;/&gt;
      &lt;/variables&gt;
      &lt;core:on-node v1=&quot;tm&quot; v2=&quot;pc&quot;/&gt;
      &lt;osgi:has-bundle v=&quot;hg&quot; b=&quot;cilia.jar&quot;/&gt;
    &lt;/constraints&gt;

    &lt;global-configs&gt;
      &lt;core:topscopeleader url=&quot;cube://localhost:38000&quot;/&gt;
    &lt;/global-configs&gt;

  &lt;/archetype&gt;
&lt;/cube&gt;</pre></div></div></div>
                  </div>
            </div>
      
    <hr/>

    <footer>
            <div class="container-fluid">
              <div class="row span12">Copyright &copy;                   2012.
          All Rights Reserved.      
                    
      </div>

        
        
                </div>
    </footer>
  </body>
</html>
