<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!--
 | Generated by Apache Maven Doxia at Jul 16, 2012
 | Rendered using Apache Maven Fluido Skin 1.2.2
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Cube Project - Cube Project Home Page</title>
    <link rel="stylesheet" href="../css/apache-maven-fluido.min.css" />
    <link rel="stylesheet" href="../css/site.css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />

      
    <script type="text/javascript" src="../js/apache-maven-fluido.min.js"></script>

    
      <meta name="author" content="Bassem Debbabi" />
    <meta name="Date-Revision-yyyymmdd" content="20120716" />
    <meta http-equiv="Content-Language" content="en" />
            </head>
        <body class="topBarDisabled">
          
        
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                                  <a href="../index.html" id="bannerLeft">
                                                                                                <img src="../images/cube.png"  alt="Cube Project"/>
                </a>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
                  <li id="projectVersion">Version: 1.2</li>
              
                
                    
                  <li id="publishDate" class="pull-right">Last Published: 2012-07-16</li> 
            
                            </ul>
      </div>

            <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
                
                    
                                    <h3>Project Links</h3>
                  <ul>
                  <li class="none">
                          <a href="../index.html" title="Home">Home</a>
            </li>
                  <li class="none">
                          <a href="../1.2/getting_started.html" title="Getting started">Getting started</a>
            </li>
                  <li class="none">
                          <a href="../1.2/doc.html" title="Documentation">Documentation</a>
            </li>
                  <li class="none">
                          <a href="../download.html" title="Download">Download</a>
            </li>
                  <li class="none">
                          <a href="../license.html" title="License">License</a>
            </li>
          </ul>
                        <h3>Catalog</h3>
                  <ul>
                  <li class="none">
                          <a href="../1.2/managed_elements.html" title="Managed Elements">Managed Elements</a>
            </li>
                  <li class="none">
                          <a href="../1.2/constraints.html" title="Constraints">Constraints</a>
            </li>
                  <li class="none">
                          <a href="../1.2/extensions.html" title="Extensions">Extensions</a>
            </li>
          </ul>
                        <h3>Other Links</h3>
                  <ul>
                  <li class="none">
                          <a href="http://cube.imag.fr/wiki" class="externalLink" title="Wiki">Wiki</a>
            </li>
          </ul>
                      
                    
                
          <hr class="divider" />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="poweredBy" alt="Built by Maven" src="../images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
        <div id="bodyColumn"  class="span10" >
                                  
            <p><a href="./doc.html">Documentation</a> &gt;</p><div class="section"><h2>Home Resource Monitoring data-mediation system<a name="Home_Resource_Monitoring_data-mediation_system"></a></h2><p>In this use case, we will show how to self-manage distributed mediation application using Cube framework. In a nutshell, Mediation applications are systems that collect data from several sources, then transport and process the data so it can be consumed by several sinks. Their architecture takes the form of a directed acyclic graph, where nodes are data mediator components - or Mediators - (receiving, processing and forwarding data) and arcs are connections between Mediators (transmitting data). In this use case, we will use Cilia mediation framework as target system. A small description of this framework is given in the next section. In this tutorial, we start first by explaining and testing the targeted Cilia mediation application manually. After that, we will progressively integrate and use Cube to self-manage the different mediators on the different execution nodes.</p><div class="section"><h3>The Managed System: Cilia mediation chains<a name="The_Managed_System:_Cilia_mediation_chains"></a></h3><div class="section"><h4>The Use case<a name="The_Use_case"></a></h4><p>In this use case, we will manage a distributed application which collect data from several sources (homes), then aggregate, transform and forward the data to a national data-center for statistic and analytic operations.</p><img src="./images/usecase1.png" alt="Use case 1" /><p>This distributed application is already implemented using Cilia Mediation framework (see the next sub-section). In this use case, we are interesting in controlling and self-managing this application using Cube. We will show progressively how Cube can be used to self-management such systems.</p></div><div class="section"><h4>What is Cilia Framework?<a name="What_is_Cilia_Framework"></a></h4><p>Cilia is a specialized framework for the construction of mediation applications. It proposes both: a specialized component model and a dynamic execution environment. Utilization of a component model aims the construction of mediation applications by composition of components, which leverages the modularity of applications. In addition to modularity, dynamicity is other important property in Cilia approach, mediation applications are enough flexible to change their architecture dynamically at run-time.</p><img src="./images/usecase1_cilia.png" alt="Use case 1 - Cilia" /><p>Notice that <b>Adapters</b> are special Mediators which are at the beginning and the end of the mediation chain.</p></div><div class="section"><h4>The Use case Mediators<a name="The_Use_case_Mediators"></a></h4><p>Here the list of the provided Cilia Mediators along with a small description of their job.</p><table align="center" border="1" class="table table-striped"><tr class="a"><td align="right"><b>Mediator Component</b></td><td align="right"><b>Description</b></td></tr><tr class="b"><td align="right">GP</td><td align="right">&#x201c;Gas Probe&#x201d;. It Collects consumption information from the Gas meter.</td></tr><tr class="a"><td align="right">EP</td><td align="right">&#x201c;Electricity Probe&#x201d;. It Collects consumption information from the Electricity meter.</td></tr><tr class="b"><td align="right">WP</td><td align="right">&#x201c;Water Probe&#x201d;. It Collects consumption information from the Water meter.</td></tr><tr class="a"><td align="right">HC</td><td align="right">&#x201c;House Calculator&#x201d;. It calculates and aggregates data received from the different probes.</td></tr><tr class="b"><td align="right">CA</td><td align="right">&#x201c;City Aggregator&#x201d;. It aggregates data received from the different homes.</td></tr><tr class="a"><td align="right">CC</td><td align="right">&#x201c;City Calculator&#x201d;. It calculates different measures about the global city consumption.</td></tr><tr class="b"><td align="right">NA</td><td align="right">&#x201c;Nationl Aggregator&#x201d;. It aggregates the different measured data of all the cities.</td></tr><tr class="a"><td align="right">toDB</td><td align="right">&#x201c;To Database&#x201d;. It saves the collected data in the Database.</td></tr></table></div><div class="section"><h4>The Mediation chain<a name="The_Mediation_chain"></a></h4><p>The following picture gives an overview (a snapshot) of the deployed mediation chain.</p><img src="./images/usecase1_example.png" alt="Use case 1 - example" /></div></div><div class="section"><h3>Testing the Cilia application without Cube<a name="Testing_the_Cilia_application_without_Cube"></a></h3><p>Before starting to manipulate Cube framework, we will first try to launch the presented Cilia application manually. Further in this tutorial, we will show how Cilia benefits of Cube framework to self-manage all the distributed mediation application.</p><div class="section"><h4>All In one gateway<a name="All_In_one_gateway"></a></h4><p>Cilia Mediators execute within an OSGi platform. OSGi provides the standardized primitives that allow applications to be constructed from small, reusable and collaborative components. These components can be composed into an application and deployed. Notice that there is no requirement to know about this technology in order to execute and test the actual use case. For more information visit http://www.osgi.org (or http://felix.apache.org the Apache implementation of this specification).</p><p>Cilia chains can be constructed either with an XML description file (called dscilia), or with Java code. In the following example we show how to construct the already described Mediation Chain in only one gateway. In this case, all the bindings between the mediators are local invocations.</p><p>The following listing is snapshot of the Cilia XML file used to instantiate the different Mediators of this local mediation chain (see the full version here).</p><div class="source"><pre class="prettyprint">&lt;cilia&gt;
  &lt;chain id=&quot;DemoChain&quot;&gt;
    &lt;adapters&gt;
      &lt;adapter-instance type=&quot;GP&quot; id=&quot;gp1&quot;/&gt;
      &lt;adapter-instance type=&quot;EP&quot; id=&quot;ep1&quot;/&gt;
      &lt;adapter-instance type=&quot;WP&quot; id=&quot;wp1&quot;/&gt;
      &lt;adapter-instance type=&quot;TODB&quot; id=&quot;toDB1&quot;/&gt;
    &lt;/adapters&gt;
    &lt;mediators&gt;
      &lt;mediator-instance type=&quot;HC&quot; id=&quot;hc1&quot;/&gt;
      &lt;mediator-instance type=&quot;CA&quot; id=&quot;ca1&quot;/&gt;
      &lt;mediator-instance type=&quot;CC&quot; id=&quot;cc1&quot;/&gt;
      &lt;mediator-instance type=&quot;NA&quot; id=&quot;na1&quot;/&gt;
    &lt;/mediators&gt;
    &lt;bindings&gt;
      &lt;binding from=&quot;gp1&quot; to=&quot;hc1&quot;/&gt;
      &lt;binding from=&quot;ep1&quot; to=&quot;hc1&quot;/&gt;
      &lt;binding from=&quot;wp1&quot; to=&quot;hc1&quot;/&gt;
      &lt;binding from=&quot;hc1&quot; to=&quot;ca1&quot;/&gt;
      &lt;binding from=&quot;ca1&quot; to=&quot;cc1&quot;/&gt;
      &lt;binding from=&quot;cc1&quot; to=&quot;na1&quot;/&gt;
      &lt;binding from=&quot;na1&quot; to=&quot;toDB1&quot;/&gt;
    &lt;/bindings&gt;
  &lt;/chain&gt;
&lt;/cilia&gt;</pre></div><p>..deploy</p><p>You notice that there is no manner to change the mediation chain structure. In the case where we want to add a new gateway and dispatch the different mediators between them, the task is so tricky. We should write new two dscilia files, where in each file there is a description of the local mediator instances.</p></div><div class="section"><h4>Distributed gateways<a name="Distributed_gateways"></a></h4><p>Now, we will test the Cilia mediation application is distributed gateways.</p><p>The actual version of Cilia, does not have a distributed chains specification file. We will divide the dscilia file in different files for each gateway, and we will use JMS adapters between these parts of the mediation chain.</p></div></div><div class="section"><h3>Prepare the Cube's Archetype<a name="Prepare_the_Cubes_Archetype"></a></h3><p>The Archetype is an XML file containing the description of the administrator's objectives as a set of constraints on the different managed elements (For more information see the <a href="./archetype.html">Archetype Specification</a>). In the following, we will write the Archetype specification for our explained use case.</p><p>We start be putting a global XML tag called &#x201c;cube&#x201d; where we specify the different namespaces for all the different extensions.</p><div class="source"><pre class="prettyprint">&lt;cube xmlns:core=&quot;fr.liglab.adele.cube.core&quot;
      xmlns:cilia=&quot;fr.liglab.adele.cube.cilia&quot;&gt;
 
  &lt;!-- archetype goes here --&gt;
 
&lt;/cube&gt;</pre></div><p>In between the &#x201c;cube&#x201d; XML tag, we define our application's archetype.</p><div class="source"><pre class="prettyprint">&lt;cube&gt;
  &lt;archetype name=&quot;demo&quot;
           symbolicname=&quot;Home Resource Monitoring data-mediation system&quot;
           version=&quot;1.0&quot;&gt;
 
    &lt;!-- archetype content --&gt;
 
  &lt;/archetype&gt;
&lt;/dube&gt;</pre></div><p>Within the &#x201c;archetype&#x201d; tag, we start by enumerating the different managed element types, using the core types scopetype, nodetype and componenttype :</p><div class="source"><pre class="prettyprint">&lt;types&gt;
&lt;!-- SCOPES --&gt;
  &lt;core:scope id=&quot;City&quot;/&gt;
  &lt;core:scope id=&quot;Central&quot;/&gt;
  &lt;!-- NODES --&gt;
  &lt;core:node id=&quot;Gateway&quot;/&gt;
  &lt;core:node id=&quot;Server&quot;/&gt;
  &lt;core:node id=&quot;DataCenter&quot;/&gt;
  &lt;!-- COMPONENTS TYPES --&gt;
  &lt;core:component id=&quot;GP&quot; description=&quot;Gas Probe&quot;/&gt;
  &lt;core:component id=&quot;WP&quot; description=&quot;Water Probe&quot;/&gt;
  &lt;core:component id=&quot;EP&quot; description=&quot;Electricity Probe&quot;/&gt;
  &lt;core:component id=&quot;HC&quot; description=&quot;House Calculator&quot;/&gt;
  &lt;core:component id=&quot;CA&quot; description=&quot;City Aggregator&quot;/&gt;
  &lt;core:component id=&quot;CC&quot; description=&quot;City Calculator&quot;/&gt;
  &lt;core:component id=&quot;NA&quot; description=&quot;National Aggregator&quot;/&gt;
&lt;/types&gt;</pre></div><p>Next, we define constraints on these types, and hence on their instances (check <a href="./constraints.html">the list of the provided constraints</a>):</p><div class="source"><pre class="prettyprint">&lt;constraints&gt;

&lt;/constraints&gt;</pre></div></div><div class="section"><h3>Testing the use case without integrating Cilia<a name="Testing_the_use_case_without_integrating_Cilia"></a></h3><p>Cube provides tools to simulate the creation of components, and to see at any time the runtime model of one Cube Agent (which represents the managed system part)&#x2026;</p><p>see <a href="./commandline.html">CommandLine tool</a>.</p></div><div class="section"><h3>The final integration<a name="The_final_integration"></a></h3><div class="section"><h4>Cilia Extension<a name="Cilia_Extension"></a></h4></div></div><div class="section"><h3>Evaluation<a name="Evaluation"></a></h3></div></div>
                  </div>
            </div>
      
    <hr/>

    <footer>
            <div class="container-fluid">
              <div class="row span12">Copyright &copy;                   2012.
          All Rights Reserved.      
                    
      </div>

        
        
                </div>
    </footer>
  </body>
</html>
